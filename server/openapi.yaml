openapi: 3.0.3
info:
  title: Aichi Governance API
  version: 1.5.0
servers:
  - url: /
paths:
  /health:
    get:
      summary: Health check
      responses:
        '200': { description: OK }

  /api/v1/meta/version:
    get:
      summary: Get service version and revision info
      responses:
        '200': { description: Version payload }

  /api/v1/meta/entity-coverage:
    get:
      summary: Get current entity implementation coverage
      responses:
        '200': { description: Coverage payload }

  /api/v1/bootstrap:
    get:
      summary: Load full bootstrap payload for mockup-compatible frontend
      parameters:
        - in: query
          name: projection
          schema: { type: string, enum: [full, panorama, directory, standards, review] }
        - in: query
          name: sections
          schema: { type: string, description: Comma-separated section names }
        - in: query
          name: review_status
          schema: { type: string }
      responses:
        '200': { description: Bootstrap payload }

  /api/v1/panorama/domains:
    get:
      summary: List panorama domains
      parameters:
        - in: query
          name: health
          schema: { type: string }
        - in: query
          name: priority
          schema: { type: string }
        - in: query
          name: projection
          schema: { type: string, enum: [full, summary, governance] }
        - in: query
          name: fields
          schema: { type: string, description: Comma-separated field projection paths }
      responses:
        '200': { description: Domain list }

  /api/v1/panorama/domains/{id}/systems:
    get:
      summary: List systems under a domain
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
        - in: query
          name: level
          schema: { type: string }
        - in: query
          name: status
          schema: { type: string }
        - in: query
          name: projection
          schema: { type: string, enum: [full, summary, governance] }
        - in: query
          name: fields
          schema: { type: string, description: Comma-separated field projection paths }
      responses:
        '200': { description: Systems list }

  /api/v1/panorama/systems/{id}/architecture:
    get:
      summary: Get system architecture (subsystems and applications)
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
        - in: query
          name: projection
          schema: { type: string, enum: [full, summary, flat] }
      responses:
        '200': { description: Architecture payload }

  /api/v1/panorama/applications/{id}/profile:
    get:
      summary: Get application profile and dependencies
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
        - in: query
          name: projection
          schema: { type: string, enum: [full, basic] }
      responses:
        '200': { description: Application profile }
    patch:
      summary: Patch application profile fields
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema: { type: object }
      responses:
        '200': { description: Updated application profile }

  /api/v1/panorama/applications/{id}/artifacts:
    get:
      summary: List artifacts of an application
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Artifact list }

  /api/v1/panorama/applications/{id}/tech-components:
    get:
      summary: List tech components used by an application
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Tech component list }

  /api/v1/panorama/applications/{id}/data-objects:
    get:
      summary: List data objects owned by an application
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Data object list }

  /api/v1/panorama/applications/{id}/interfaces:
    get:
      summary: Get API groups/endpoints summary of an application
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Interface summary payload }

  /api/v1/panorama/applications/{id}/runtime:
    get:
      summary: Get runtime view of an application
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Runtime payload }

  /api/v1/panorama/applications/{id}/compliance:
    get:
      summary: Get compliance checks of an application
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Compliance payload }

  /api/v1/panorama/dependency-graph:
    get:
      summary: Get dependency graph
      parameters:
        - in: query
          name: domain_id
          schema: { type: string }
        - in: query
          name: app_id
          schema: { type: string }
        - in: query
          name: depth
          schema: { type: integer }
      responses:
        '200': { description: Graph payload }

  /api/v1/panorama/applications/{id}/impact:
    get:
      summary: Get impact analysis for application
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
        - in: query
          name: change_type
          schema: { type: string }
        - in: query
          name: depth
          schema: { type: integer }
      responses:
        '200': { description: Impact payload }

  /api/v1/panorama/data-centers/summary:
    get:
      summary: List data center summaries
      responses:
        '200': { description: Data center list }

  /api/v1/panorama/applications/{id}/deployment-topology:
    get:
      summary: Get deployment topology of application
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Deployment topology payload }

  /api/v1/panorama/dr-validation:
    get:
      summary: Get DR validation result
      responses:
        '200': { description: DR validation payload }

  /api/v1/panorama/database-clusters:
    get:
      summary: List database clusters
      parameters:
        - in: query
          name: type
          schema: { type: string }
        - in: query
          name: dc_id
          schema: { type: string }
        - in: query
          name: dr
          schema: { type: string }
        - in: query
          name: projection
          schema: { type: string, enum: [full, summary] }
        - in: query
          name: fields
          schema: { type: string, description: Comma-separated field projection paths }
      responses:
        '200': { description: Database clusters }

  /api/v1/panorama/database-clusters/{id}/detail:
    get:
      summary: Get database cluster detail
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Database detail }

  /api/v1/panorama/middleware-clusters:
    get:
      summary: List middleware clusters
      parameters:
        - in: query
          name: type
          schema: { type: string }
        - in: query
          name: health
          schema: { type: string }
        - in: query
          name: projection
          schema: { type: string, enum: [full, summary] }
        - in: query
          name: fields
          schema: { type: string, description: Comma-separated field projection paths }
      responses:
        '200': { description: Middleware clusters }

  /api/v1/panorama/middleware-clusters/{id}/impact:
    get:
      summary: Get middleware impact
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Middleware impact payload }

  /api/v1/panorama/traffic-chain:
    get:
      summary: Get traffic chain by domain
      parameters:
        - in: query
          name: domain
          schema: { type: string }
      responses:
        '200': { description: Traffic chain payload }

  /api/v1/panorama/lb-domains:
    get:
      summary: List load balancer domains
      responses:
        '200': { description: LB domain list }

  /api/v1/panorama/otel-services:
    get:
      summary: List OTel services
      parameters:
        - in: query
          name: app_id
          schema: { type: string }
      responses:
        '200': { description: OTel service list }

  /api/v1/panorama/otel-services/{id}/instances:
    get:
      summary: List instances of an OTel service
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: OTel instance list }

  /api/v1/panorama/tech-radar:
    get:
      summary: Get tech radar buckets
      responses:
        '200': { description: Tech radar payload }

  /api/v1/panorama/tech-debt:
    get:
      summary: Get tech debt list
      responses:
        '200': { description: Tech debt payload }

  /api/v1/panorama/drift-detection:
    get:
      summary: Get runtime drift detection result
      responses:
        '200': { description: Drift payload }

  /api/v1/compliance-rules:
    get:
      summary: List compliance rules
      parameters:
        - in: query
          name: fields
          schema: { type: string, description: Comma-separated field projection paths }
      responses:
        '200': { description: Compliance rule list }

  /api/v1/standards:
    get:
      summary: List architecture standards
      parameters:
        - in: query
          name: category
          schema: { type: string }
        - in: query
          name: status
          schema: { type: string }
        - in: query
          name: projection
          schema: { type: string, enum: [full, summary] }
        - in: query
          name: fields
          schema: { type: string, description: Comma-separated field projection paths }
      responses:
        '200': { description: Standard list }
    post:
      summary: Create architecture standard
      requestBody:
        required: true
        content:
          application/json:
            schema: { type: object }
      responses:
        '201': { description: Created standard }

  /api/v1/standards/rule-map:
    get:
      summary: Get rule to standard mapping
      responses:
        '200': { description: Rule map payload }

  /api/v1/standards/{id}:
    get:
      summary: Get architecture standard detail
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Standard detail payload }
    put:
      summary: Update architecture standard
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema: { type: object }
      responses:
        '200': { description: Updated standard }
    delete:
      summary: Delete architecture standard
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Deletion result }

  /api/v1/standards/{id}/rules:
    post:
      summary: Add rule to architecture standard
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema: { type: object }
      responses:
        '201': { description: Created rule }

  /api/v1/standards/{id}/rules/{ruleId}:
    put:
      summary: Update rule under architecture standard
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
        - in: path
          name: ruleId
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema: { type: object }
      responses:
        '200': { description: Updated rule }
    delete:
      summary: Delete rule under architecture standard
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
        - in: path
          name: ruleId
          required: true
          schema: { type: string }
      responses:
        '200': { description: Deletion result }

  /api/v1/tech-components:
    get:
      summary: List technology components
      parameters:
        - in: query
          name: category
          schema: { type: string }
        - in: query
          name: lifecycle
          schema: { type: string }
        - in: query
          name: status
          schema: { type: string }
        - in: query
          name: projection
          schema: { type: string, enum: [full, summary] }
        - in: query
          name: fields
          schema: { type: string, description: Comma-separated field projection paths }
      responses:
        '200': { description: Tech component list }
    post:
      summary: Create technology component
      requestBody:
        required: true
        content:
          application/json:
            schema: { type: object }
      responses:
        '201': { description: Created tech component }

  /api/v1/tech-components/{id}:
    put:
      summary: Update technology component
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema: { type: object }
      responses:
        '200': { description: Updated tech component }
    delete:
      summary: Delete technology component
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Deletion result }

  /api/v1/applications/{id}/tech-components:
    get:
      summary: List app-tech relations
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: App-tech relation list }
    post:
      summary: Bind tech component to application
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema: { type: object }
      responses:
        '200': { description: Binding result }

  /api/v1/applications/{id}/tech-components/{componentId}:
    put:
      summary: Update app-tech relation
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
        - in: path
          name: componentId
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema: { type: object }
      responses:
        '200': { description: Updated app-tech relation }
    delete:
      summary: Delete app-tech relation
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
        - in: path
          name: componentId
          required: true
          schema: { type: string }
      responses:
        '200': { description: Deletion result }

  /api/v1/capabilities:
    get:
      summary: List capabilities
      parameters:
        - in: query
          name: domain_id
          schema: { type: string }
      responses:
        '200': { description: Capability list }

  /api/v1/teams:
    get:
      summary: List teams
      responses:
        '200': { description: Team list }

  /api/v1/registries:
    get:
      summary: List service registries
      responses:
        '200': { description: Registry list }

  /api/v1/processes:
    get:
      summary: List processes
      parameters:
        - in: query
          name: capability_id
          schema: { type: string }
      responses:
        '200': { description: Process list }

  /api/v1/data/subject-areas:
    get:
      summary: List subject areas
      responses:
        '200': { description: Subject area list }

  /api/v1/data/logical-entities:
    get:
      summary: List logical entities
      parameters:
        - in: query
          name: subject_area_id
          schema: { type: string }
      responses:
        '200': { description: Logical entity list }

  /api/v1/data/data-objects:
    get:
      summary: List data objects
      parameters:
        - in: query
          name: app_id
          schema: { type: string }
        - in: query
          name: logical_entity_id
          schema: { type: string }
      responses:
        '200': { description: Data object list }

  /api/v1/infra/data-centers:
    get:
      summary: List infrastructure data centers
      responses:
        '200': { description: Data center list }

  /api/v1/infra/machine-rooms:
    get:
      summary: List machine rooms
      parameters:
        - in: query
          name: dc_id
          schema: { type: string }
      responses:
        '200': { description: Machine room list }

  /api/v1/infra/racks:
    get:
      summary: List racks
      parameters:
        - in: query
          name: room_id
          schema: { type: string }
      responses:
        '200': { description: Rack list }

  /api/v1/infra/physical-servers:
    get:
      summary: List physical servers
      parameters:
        - in: query
          name: rack_id
          schema: { type: string }
      responses:
        '200': { description: Physical server list }

  /api/v1/infra/virtual-machines:
    get:
      summary: List virtual machines
      parameters:
        - in: query
          name: dc_id
          schema: { type: string }
      responses:
        '200': { description: VM list }

  /api/v1/infra/k8s-clusters:
    get:
      summary: List k8s clusters
      responses:
        '200': { description: K8s cluster list }

  /api/v1/infra/k8s-namespaces:
    get:
      summary: List k8s namespaces
      parameters:
        - in: query
          name: cluster_id
          schema: { type: string }
      responses:
        '200': { description: Namespace list }

  /api/v1/infra/containers:
    get:
      summary: List containers
      parameters:
        - in: query
          name: namespace_id
          schema: { type: string }
      responses:
        '200': { description: Container list }

  /api/v1/infra/network-zones:
    get:
      summary: List network zones
      responses:
        '200': { description: Network zone list }

  /api/v1/infra/network-devices:
    get:
      summary: List network devices
      responses:
        '200': { description: Network device list }

  /api/v1/infra/physical-networks:
    get:
      summary: List physical networks
      responses:
        '200': { description: Physical network list }

  /api/v1/infra/vips:
    get:
      summary: List VIPs
      parameters:
        - in: query
          name: app_id
          schema: { type: string }
      responses:
        '200': { description: VIP list }

  /api/v1/infra/firewall-rules:
    get:
      summary: List firewall rules
      parameters:
        - in: query
          name: source_zone_id
          schema: { type: string }
        - in: query
          name: target_zone_id
          schema: { type: string }
      responses:
        '200': { description: Firewall rule list }

  /api/v1/reviews:
    get:
      summary: List reviews
      parameters:
        - in: query
          name: status
          schema: { type: string }
        - in: query
          name: applicant
          schema: { type: string }
        - in: query
          name: type
          schema: { type: string }
        - in: query
          name: from
          schema: { type: string, format: date }
        - in: query
          name: to
          schema: { type: string, format: date }
        - in: query
          name: projection
          schema: { type: string, enum: [full, summary] }
        - in: query
          name: fields
          schema: { type: string, description: Comma-separated field projection paths }
      responses:
        '200': { description: Review list }
    post:
      summary: Create review draft
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [title, type]
      responses:
        '201': { description: Review created }

  /api/v1/reviews/{id}:
    get:
      summary: Get review detail
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
        - in: query
          name: projection
          schema: { type: string, enum: [full, summary] }
        - in: query
          name: fields
          schema: { type: string, description: Comma-separated field projection paths }
        - in: query
          name: include_checks
          schema: { type: string, description: true/false (default true) }
      responses:
        '200': { description: Review detail }

  /api/v1/reviews/{id}/submit:
    put:
      summary: Submit review and run compliance checks
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Submit result }

  /api/v1/reviews/{id}/resubmit:
    put:
      summary: Resubmit review and run compliance checks
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Resubmit result }

  /api/v1/reviews/{id}/compliance-check:
    get:
      summary: List compliance checks for review
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Compliance checks }

  /api/v1/reviews/{id}/compliance-check/run:
    post:
      summary: Re-run compliance checks for review
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Compliance re-run result }

  /api/v1/reviews/{id}/approve:
    put:
      summary: Approve review
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Approve result }

  /api/v1/reviews/{id}/reject:
    put:
      summary: Reject review
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: Reject result }

  /api/v1/reviews/dashboard/my-workbench:
    get:
      summary: Get my review workbench metrics
      parameters:
        - in: query
          name: user
          schema: { type: string }
      responses:
        '200': { description: Workbench metrics }

  /api/v1/reviews/dashboard/metrics:
    get:
      summary: Get review dashboard metrics
      responses:
        '200': { description: Metrics payload }
